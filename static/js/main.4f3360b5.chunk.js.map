{"version":3,"sources":["actions/user.js","actions/notification.js","components/Frame/MiLogo.png","components/Loading/index.js","views/index.js","routers/index.js","components/Frame/index.js","App.js","reducers/notification.js","reducers/user.js","reducers/index.js","store.js","index.js","actions/actionTypes.js","requests/index.js"],"names":["Login","info","dispatch","startLogin","loginRequest","then","resp","data","authToken","Info","code","remember","window","localStorage","setItem","JSON","stringify","sessionStorage","logSuccess","logFailed","removeItem","type","actionTypes","LOG_FAIL","console","log","LOG_SUCCESS","payload","START_lOG","avatarUpdate","path","AVATAR_UPLOAD","avatar","markNotificationAsReadyById","id","startMark","setTimeout","MARK_NOTIFICATION_AS_READ_BY_ID","endMark","markAllAsRead","MARK_ALL_NOTIFICATIONS_AS_READ","getNotification","getNotificaions","RECEIVE_NOTIFICATION","list","Begin_MARK","END_MARK","module","exports","index","Component","Dashboard","Loadable","loader","loading","Loading","NotFound","Settings","Article","ArticleEdit","Notification","Authentication","mainRouter","pathname","component","adminRouter","title","isNav","icon","DashboardOutlined","roles","exact","OrderedListOutlined","SettingOutlined","Header","Content","Sider","Footer","connect","state","user","number","notifications","filter","ele","hasRead","length","displayName","withRouter","select","key","props","history","push","dropDownMenuClick","this","menu","onClick","Item","dot","Boolean","menus","route","style","minHeight","className","src","logo","display","alignItems","overlay","trigger","count","offset","e","preventDefault","size","marginRight","DownOutlined","width","mode","selectedKeys","location","height","borderRight","map","padding","margin","children","App","isLogin","role","Frame","render","routerProps","includes","to","from","initState","isLoading","getItem","parse","combineReducers","action","newList","item","isloading","createStore","reducer","applyMiddleware","thunk","store","basename","process","routerPropers","document","querySelector","LOG_OUT","service","axios","create","baseURL","userInfo","interceptors","request","use","config","response","error","errMsg","getArticles","limited","post","deleteArticle","getArticle","get","modifyArticle","readingAmount","avatarUpload","file","FormData","append"],"mappings":"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","file":"static/js/main.4f3360b5.chunk.js","sourcesContent":["import actionTypes from \"./actionTypes\"\r\nimport {loginRequest} from '../requests'\r\n\r\nexport const Login=(info)=>{\r\nreturn (dispatch=>{\r\n    dispatch(startLogin())\r\n    loginRequest(info).then(resp=>{\r\n        const {authToken,...Info}=resp.data.data\r\n        if(resp.data.code===200){\r\n            if(info.remember===true){\r\n                window.localStorage.setItem(\"authToken\",JSON.stringify(authToken))\r\n                window.localStorage.setItem(\"info\",JSON.stringify(Info))\r\n                // console.log(JSON.stringify(resp.data.data))\r\n                \r\n            }else{\r\n                window.sessionStorage.setItem(\"authToken\",JSON.stringify(authToken))\r\n                window.sessionStorage.setItem(\"info\",JSON.stringify(Info))\r\n            }\r\n            dispatch(logSuccess(resp.data.data))\r\n        }else{\r\n            dispatch(logFailed())\r\n        }\r\n        \r\n    })\r\n})\r\n}\r\nexport const logFailed=()=>{\r\n    window.localStorage.removeItem(\"authToken\")\r\n    window.localStorage.removeItem(\"info\")\r\n    window.sessionStorage.removeItem(\"authToken\")\r\n    window.sessionStorage.removeItem(\"info\")\r\n    return {\r\n        type:actionTypes.LOG_FAIL\r\n    }\r\n}\r\n\r\nexport const logSuccess=(data)=>{\r\n    console.log('success',data)\r\n    return{\r\n        type:actionTypes.LOG_SUCCESS,\r\n        payload:{\r\n            info:data\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport const startLogin=()=>{\r\n    return{\r\n        type:actionTypes.START_lOG\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const avatarUpdate=(path)=>{\r\n    return dispatch=>{\r\n        dispatch({\r\n            type:actionTypes.AVATAR_UPLOAD,\r\n            payload:{\r\n                avatar:path\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n","import actionTypes from \"./actionTypes\"\r\nimport {getNotificaions,} from '../requests'\r\nexport const markNotificationAsReadyById=(id)=>{\r\n    return dispatch=>{\r\n        dispatch(startMark())\r\n\r\n        setTimeout(()=>{\r\n            dispatch(\r\n                {\r\n                    type:actionTypes.MARK_NOTIFICATION_AS_READ_BY_ID,\r\n                    payload:{\r\n                        id\r\n                    }\r\n                }\r\n            )\r\n            dispatch(endMark())\r\n\r\n        },2000)\r\n\r\n    }\r\n}\r\n\r\nexport const markAllAsRead=()=>{\r\n    return dispatch=>{\r\n        dispatch(startMark())\r\n        setTimeout(()=>{\r\n            dispatch(\r\n                {\r\n                    type:actionTypes.MARK_ALL_NOTIFICATIONS_AS_READ\r\n                }\r\n            )\r\n            dispatch(endMark())\r\n        },2000)\r\n   \r\n    }\r\n}\r\n\r\nexport const getNotification=()=>{\r\n    return (dispatch=>{\r\n        dispatch(startMark())\r\n            getNotificaions().then(resp=>{\r\n                dispatch(\r\n                    {\r\n                        type:actionTypes.RECEIVE_NOTIFICATION,\r\n                        payload:{\r\n                            list:resp\r\n                        }\r\n                    }\r\n                )\r\n                dispatch(endMark())\r\n            })\r\n           \r\n        \r\n\r\n   \r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const startMark=()=>{\r\n    return       {\r\n                    type:actionTypes.Begin_MARK\r\n                }\r\n\r\n}\r\n\r\nexport const endMark=()=>{\r\n    return       {\r\n                    type:actionTypes.END_MARK\r\n                }\r\n\r\n}\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/MiLogo.0e90bd81.png\";","import React, { Component } from 'react'\r\n\r\nexport default class index extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                Loading\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// import Dashboard from './DashBoard'\r\n// import Login from './Login'\r\n// import NotFound from './NotFound'\r\n// import Settings from './Settings'\r\n// import Article  from './Article'\r\n// import ArticleEdit from './Article/Edit'\r\nimport {Loading} from '../components'\r\nimport Loadable from 'react-loadable'\r\n\r\nconst  Dashboard= Loadable({\r\n    loader: ()=>import('./DashBoard'),\r\n    loading: Loading\r\n})\r\nconst  NotFound= Loadable({\r\n    loader: ()=>import('./NotFound'),\r\n    loading: Loading\r\n})\r\nconst  Settings= Loadable({\r\n    loader: ()=>import('./Settings'),\r\n    loading: Loading\r\n})\r\nconst  Login= Loadable({\r\n    loader: ()=>import('./Login'),\r\n    loading: Loading\r\n})\r\nconst  Article= Loadable({\r\n    loader: ()=>import('./Article'),\r\n    loading: Loading\r\n})\r\n\r\nconst  ArticleEdit= Loadable({\r\n    loader: ()=>import('./Article/Edit'),\r\n    loading: Loading\r\n})\r\n\r\n\r\nconst Notification=Loadable({\r\n    loader: ()=>import('./Notifications'),\r\n    loading: Loading\r\n})\r\n\r\nconst Authentication=Loadable({\r\n    loader: ()=>import('./Authentication'),\r\n    loading: Loading\r\n})\r\n\r\n\r\n\r\nexport{\r\n    Dashboard,\r\n    Login,\r\n    NotFound,\r\n    Settings,\r\n    Article,\r\n    ArticleEdit,\r\n    Notification,\r\n    Authentication\r\n}","import {\r\n  Dashboard,\r\n  Login,\r\n  NotFound,\r\n  Settings,\r\n  Article,\r\n  ArticleEdit,\r\n  Notification,\r\n  Authentication\r\n} from \"../views\";\r\nimport { DashboardOutlined,OrderedListOutlined , SettingOutlined } from '@ant-design/icons';\r\nimport { Component } from \"react\";\r\n\r\nexport const mainRouter = [\r\n  {\r\n    pathname: \"/React-Practice/login\",\r\n    component: Login\r\n  },\r\n  {\r\n    pathname: \"/React-Practice/404\",\r\n    component: NotFound\r\n  },\r\n  {\r\n    pathname: \"/React-Practice/login\",\r\n    component: Login\r\n  }\r\n];\r\n\r\nexport const  adminRouter=[\r\n    {\r\n        pathname: \"/React-Practice/admin/dashboard\",\r\n        component: Dashboard,\r\n        title:\"Dashboard\",\r\n        isNav: true,\r\n        icon: DashboardOutlined,\r\n        roles:['001','002']\r\n      },\r\n      \r\n      {\r\n        pathname: \"/React-Practice/admin/article\",\r\n        component: Article,\r\n        title:\"Article\",\r\n        exact:true,\r\n        isNav: true,\r\n        icon: OrderedListOutlined,\r\n        roles:['001','002']\r\n      },\r\n      {\r\n        pathname: \"/React-Practice/admin/article/edit/:id\",\r\n        component: ArticleEdit,\r\n        title:\"ArticleEdit\",\r\n        isNav: false,\r\n        roles:['001']\r\n\r\n      },\r\n      {\r\n        pathname: \"/React-Practice/admin/settings\",\r\n        title:\"Settings\",\r\n        component: Settings,\r\n        isNav: true,\r\n        icon:SettingOutlined,\r\n        roles:['001']\r\n\r\n      },\r\n      {\r\n        pathname: \"/React-Practice/admin/notifications\",\r\n        title:\"Notification\",\r\n        component: Notification,\r\n        isNav: false,\r\n        roles:['001','002']\r\n\r\n      },\r\n      {\r\n        pathname: \"/React-Practice/admin/authentication\",\r\n        component: Authentication,\r\n        title:\"Authentication\",\r\n        isNav: false,\r\n        roles:['001','002']\r\n      }\r\n\r\n\r\n]","import React, { Component } from \"react\";\r\nimport { Layout, Menu, Breadcrumb, Icon,Dropdown, Avatar,Badge} from \"antd\";\r\nimport {DownOutlined,UserOutlined} from '@ant-design/icons'\r\nimport logo from \"./MiLogo.png\";\r\nimport \"./frame.less\";\r\nimport { adminRouter } from \"../../routers\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport {connect} from 'react-redux'\r\nimport {getNotification} from '../../actions/notification'\r\nimport {logFailed} from '../../actions/user'\r\n\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\nconst mapState=state=>{\r\n  console.log(state.user)\r\n  return {\r\n    number:state.notifications.list.filter(ele=>!ele.hasRead).length,\r\n    displayName:state.user.displayName,\r\n    avatar:state.user.avatar\r\n  }\r\n}\r\n@connect(mapState,{getNotification,logFailed})\r\n@withRouter\r\nclass index extends Component {\r\n  select = ({ key }) => {\r\n    this.props.history.push(key);\r\n  };\r\n  dropDownMenuClick=({key})=>{\r\nif(key===\"/logout\")\r\n{\r\nthis.props.logFailed()\r\n}else{\r\n  this.props.history.push(key)\r\n\r\n}\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.props.getNotification()\r\n  }\r\n  render() {\r\n    const menu = (\r\n      <Menu onClick={this.dropDownMenuClick}>\r\n        <Menu.Item key=\"/React-Practice/admin/notifications\">\r\n         <Badge dot={Boolean(this.props.number)}>\r\n         通知中心\r\n         </Badge>\r\n            \r\n        </Menu.Item>\r\n        <Menu.Item key=\"/React-Practice/admin/settings\">\r\n      \r\n            个人设置\r\n        </Menu.Item>\r\n        <Menu.Item key=\"/logout\">\r\n    \r\n            退出\r\n        </Menu.Item>\r\n      </Menu>\r\n    );\r\n    const menus = adminRouter.filter((route) => route.isNav === true);\r\n    // console.log(this.props)\r\n    return (\r\n      <Layout style={{ minHeight: \"100%\" }}>\r\n        <Header className=\"header cus-header\">\r\n          <div className=\"logo\">\r\n            <img src={logo}></img>\r\n            <span>this is test</span>\r\n          </div>\r\n          <div style={{display:\"flex\",alignItems:\"center\"}}>\r\n            <Dropdown overlay={menu} trigger={['click']}>\r\n              <Badge count={this.props.number} offset={[3,-3]}>\r\n              <a\r\n                onClick={(e) => e.preventDefault()}\r\n              >\r\n                  <Avatar size={30} src={this.props.avatar} style={{marginRight:\"5px\"}}/>\r\n                {this.props.displayName} <DownOutlined />\r\n              \r\n              </a>\r\n              </Badge>\r\n            </Dropdown>\r\n            \r\n\r\n          </div>\r\n        </Header>\r\n        <Layout>\r\n          <Sider width={200} className=\"site-layout-background\">\r\n            <Menu\r\n              mode=\"inline\"\r\n              selectedKeys={this.props.location.pathname}\r\n              style={{ height: \"100%\", borderRight: 0 }}\r\n              onClick={this.select}\r\n            >\r\n              {menus.map((ele) => {\r\n                return (\r\n                  <Menu.Item key={ele.pathname}>\r\n                    <ele.icon />\r\n                    {ele.title}\r\n                    {/* <Link to={ele.pathname} >  </Link> */}\r\n                  </Menu.Item>\r\n                );\r\n              })}\r\n            </Menu>\r\n          </Sider>\r\n          <Layout style={{ padding: \"16px\" }}>\r\n            <Content\r\n              className=\"site-layout-background\"\r\n              style={{\r\n                padding: 10,\r\n                margin: 0,\r\n                minHeight: 280,\r\n              }}\r\n            >\r\n              {this.props.children}\r\n            </Content>\r\n          </Layout>\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\nexport default index;\r\n","import React, { Component } from 'react'\r\nimport {Route,Switch,Redirect} from 'react-router-dom'\r\nimport {\r\n    Button\r\n} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport {Frame } from './components'\r\nimport {adminRouter} from './routers'\r\n// const test=(Component)=>{\r\n//     return class CopyRight extends Component{\r\n//         render(){\r\n//             return(\r\n//                 <>\r\n//                  <Component/>\r\n//                 <div> this is test message</div>\r\n//                 </>\r\n//             )\r\n//         }\r\n//     }\r\n// }\r\nconst mapToProps=state=>{\r\n    return{\r\n        isLogin: state.user.isLogin,\r\n        role:state.user.role\r\n    }\r\n}\r\n@connect(mapToProps)\r\nclass App extends Component {\r\n    render() {\r\n        console.log(this.props.isLogin)\r\n        return (\r\n            this.props.isLogin?\r\n        <Frame>\r\n            <Switch>\r\n            {\r\n                adminRouter.map(ele=>{\r\n\r\n                    return <Route key={ele.pathname} path={ele.pathname} render={\r\n                        (routerProps)=>{\r\n                            console.log(\"ele\",ele)\r\n                            console.log(\"ele2\",this.props.role)\r\n\r\n                            return (ele.roles.includes(this.props.role)?<ele.component {...routerProps}/>:<Redirect to='/React-Practice/admin/authentication'></Redirect>)\r\n                        }\r\n                    } exact={ele.exact}></Route>\r\n                })\r\n            }\r\n            <Redirect to={adminRouter[0].pathname} from='/React-Practice/admin' exact></Redirect>\r\n            {/* <Redirect to='/404' ></Redirect> */}\r\n            </Switch>\r\n            </Frame>\r\n            :\r\n            <Redirect to='/React-Practice/login' ></Redirect>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default App\r\n","import actionTypes from \"../actions/actionTypes\";\r\nlet initState = {\r\n  isLoading: false,\r\n  list:[],\r\n};\r\n\r\n\r\n\r\nexport default (state= initState , action) => {\r\n  switch (action.type) {\r\n      case actionTypes.RECEIVE_NOTIFICATION:\r\n          return{\r\n              ...state,\r\n              list:action.payload.list\r\n          }\r\n      case actionTypes.Begin_MARK:\r\n          return{\r\n            ...state,\r\n              isLoading:true\r\n              \r\n          }\r\n          case actionTypes.END_MARK:\r\n            return{\r\n                ...state,\r\n                isLoading:false\r\n             \r\n            }\r\n    case actionTypes.MARK_NOTIFICATION_AS_READ_BY_ID:\r\n        \r\n      const newList = state.list.map((item) => {\r\n        if (item.id === action.payload.id) {\r\n          item.hasRead = true;\r\n        }\r\n            return item\r\n      });\r\n      return {\r\n        ...state,\r\n        list: newList,\r\n      };\r\n\r\n      case actionTypes.MARK_ALL_NOTIFICATIONS_AS_READ:\r\n        //   console.log(\"state\",state)\r\n          return{\r\n              ...state,\r\n              list:state.list.map((item) => {\r\n           \r\n                item.hasRead = true;\r\n              \r\n                  return item\r\n            })\r\n          }\r\n    default:\r\n        return state\r\n       \r\n  }\r\n};\r\n","import actionTypes from \"../actions/actionTypes\";\r\n\r\nconst isLogin=window.localStorage.getItem(\"authToken\") || window.sessionStorage.getItem(\"authToken\")\r\n\r\nconst info=JSON.parse(window.localStorage.getItem(\"info\") )|| JSON.parse(window.sessionStorage.getItem(\"info\"))\r\n\r\nconst initState={\r\n    ...info,\r\n    isLogin,\r\n    isLoading:false\r\n}\r\n\r\n\r\nexport default(state=initState,action)=>{\r\n     console.log(\"state\",state)\r\n    switch(action.type){\r\n        case actionTypes.START_lOG:\r\n                return {\r\n                ...state,\r\n                isLoading:true\r\n            }\r\n        case actionTypes.LOG_SUCCESS:\r\n            console.log(\"ele0\",state)\r\n\r\n            return {\r\n                ...state,\r\n                isLoading:false,\r\n                isLogin:true\r\n            }\r\n        case actionTypes.LOG_FAIL:\r\n            console.log('fail')\r\n            return{\r\n                id: \"\",\r\n                avatar: \"\",\r\n                role: \"\",\r\n                displayName: \"\",\r\n                authToken:'',\r\n                isloading:false,\r\n                isLogin:false\r\n            }\r\n            case actionTypes.AVATAR_UPLOAD:\r\n                return{\r\n                    ...state,\r\n                    avatar:action.payload.avatar\r\n                }\r\n        default:\r\n            return initState\r\n    }\r\n}","// import {combineReducers} from 'redux'\r\n\r\n// import notifications from './notification.js'\r\n\r\n// export default combineReducers(\r\n//     notifications\r\n// )\r\n\r\nimport { combineReducers } from 'redux'\r\nimport notifications from './notification'\r\nimport user from './user'\r\n\r\nexport default combineReducers({\r\n  notifications,\r\n   user\r\n})","import {createStore,applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport reducer from '../src/reducers/index'\r\n\r\nexport default createStore(reducer,applyMiddleware(thunk))\r\n\r\n// import { createStore,  applyMiddleware } from 'redux'\r\n// import thunk from 'redux-thunk'\r\n\r\n// import rootReducer from './reducers'\r\n\r\n// export default createStore(\r\n//   rootReducer,\r\n//   applyMiddleware(thunk)\r\n// )","import React from 'react'\r\nimport {render } from 'react-dom'\r\nimport App from './App'\r\nimport './index.less'\r\nimport {mainRouter} from './routers'\r\nimport {BrowserRouter as Router, Route, Switch,Redirect} from 'react-router-dom'\r\nimport {Provider} from 'react-redux'\r\nimport store from './store'\r\nrender(\r\n    <Provider store={store} basename={process.env.PUBLIC_URL}>\r\n    <Router>\r\n        <Switch>\r\n            <Route path='/React-Practice/admin' render={(routerPropers)=>{\r\n                return <App {...routerPropers}></App>\r\n            }} ></Route>\r\n\r\n            {\r\n                mainRouter.map(route=>{\r\n                    return <Route key={ route.pathname} path={route.pathname} component={route.component}></Route>\r\n            })\r\n            }\r\n            <Redirect to=\"/React-Practice/admin\" from='/React-Practice/' exact></Redirect>\r\n{/* \r\n            <Redirect to=\"/404\" ></Redirect> */}\r\n\r\n\r\n        </Switch>\r\n    </Router>    \r\n    </Provider>\r\n    ,\r\ndocument.querySelector(\"#root\")\r\n)\r\n\r\n// import {render } from 'react-dom'\r\n\r\n// import {render} from 'react-dom'\r\n// import React from 'react'\r\n\r\n// import { Form, Input, Button, Checkbox } from 'antd';\r\n// import { UserOutlined, LockOutlined } from '@ant-design/icons';\r\n\r\n// const NormalLoginForm = () => {\r\n//   const onFinish = values => {\r\n//     console.log('Received values of form: ', values);\r\n//   };\r\n\r\n//   return (\r\n//     <Form\r\n//       name=\"normal_login\"\r\n//       className=\"login-form\"\r\n//       initialValues={{\r\n//         remember: true,\r\n//       }}\r\n//       onFinish={onFinish}\r\n//     >\r\n//       <Form.Item\r\n//         name=\"username\"\r\n//         rules={[\r\n//           {\r\n//             required: true,\r\n//             message: 'Please input your Username!',\r\n//           },\r\n//         ]}\r\n//       >\r\n//         <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n//       </Form.Item>\r\n//       <Form.Item\r\n//         name=\"password\"\r\n//         rules={[\r\n//           {\r\n//             required: true,\r\n//             message: 'Please input your Password!',\r\n//           },\r\n//         ]}\r\n//       >\r\n//         <Input\r\n//           prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n//           type=\"password\"\r\n//           placeholder=\"Password\"\r\n//         />\r\n//       </Form.Item>\r\n//       <Form.Item>\r\n//         <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n//           <Checkbox>Remember me</Checkbox>\r\n//         </Form.Item>\r\n\r\n//         <a className=\"login-form-forgot\" href=\"\">\r\n//           Forgot password\r\n//         </a>\r\n//       </Form.Item>\r\n\r\n//       <Form.Item>\r\n//         <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n//           Log in\r\n//         </Button>\r\n//         Or <a href=\"\">register now!</a>\r\n//       </Form.Item>\r\n//     </Form>\r\n//   );\r\n// };\r\n\r\n\r\n\r\n// render(<NormalLoginForm />, document.querySelector('#root'));\r\n\r\n","export default{\r\n    MARK_NOTIFICATION_AS_READ_BY_ID:\"MARK_NOTIFICATION_AS_READ_BY_ID\",\r\n    MARK_ALL_NOTIFICATIONS_AS_READ:\"MARK_ALL_NOTIFICATIONS_AS_READ\",\r\n    Begin_MARK:\"Begin_MARK\",\r\n    END_MARK:\"END_MARK\",\r\n    RECEIVE_NOTIFICATION:\"RECEIVE_NOTIFICATION\",\r\n    START_lOG:\"START_lOG\",\r\n    LOG_SUCCESS:\"LOG_SUCCESS\",\r\n    LOG_FAIL:\"LOG_FAIL\",\r\n    LOG_OUT:  \"LOG_OUT\",\r\n    AVATAR_UPLOAD:\"AVATAR_UPLOAD\"\r\n}","import axios from 'axios'\r\nimport {message} from 'antd'\r\nimport qs from 'qs'\r\n\r\nconst isDev=process.env.NODE_ENV==='development'\r\nconst service=axios.create({\r\n    baseURL: isDev?'http://rap2.taobao.org:38080/app/mock/248902':'',\r\n  \r\n})\r\n\r\nconst userInfo=axios.create({\r\n    baseURL: isDev?'http://rap2.taobao.org:38080/app/mock/248902':'',\r\n  \r\n})\r\n\r\nservice.interceptors.request.use((config)=>{\r\n    config.data={\r\n        ...config,\r\n        // authToken:window.localStorage.getItem('authToken')\r\n        authToken:'aaa'\r\n    }\r\n    return config\r\n})\r\n\r\nservice.interceptors.response.use((resp)=>{\r\n    if(resp.data.code===200){\r\n        return resp.data.data\r\n    }else{\r\n        message.error(resp.data.errMsg)\r\n    }\r\n})\r\n\r\n\r\n\r\nexport const getArticles=(offset=0,limited=10)=>{\r\n    return service.post('/api/v1/articleList',{\r\n        offset,\r\n        limited\r\n    })\r\n}\r\n\r\nexport const deleteArticle=(id)=>{\r\n    // console.log(`/api/v1/delete/${id}`)\r\n    return service.post(`/api/v1/delete/${id}`)\r\n}\r\n\r\n\r\nexport const getArticle=(id)=>{\r\n    return service.get(`/api/v1/article/${id}`)\r\n}\r\n\r\n\r\nexport const modifyArticle=(id,data)=>{\r\n    console.log(\"data\",data)\r\n    return service.post(`/api/v1/articleEdit/${id}`,data)\r\n}\r\n\r\nexport const readingAmount=()=>{\r\n    return service.get(\"http://rap2.taobao.org:38080/app/mock/248902/api/v1/amount\")\r\n}\r\n\r\nexport const getNotificaions=()=>{\r\n    return service.post(\"http://rap2.taobao.org:38080/app/mock/248902/example/1586326916396\")\r\n}\r\n\r\n\r\nexport const loginRequest=(info)=>{\r\n    return userInfo.post(\"http://rap2.taobao.org:38080/app/mock/248902/api/v1/login\",info)\r\n\r\n}\r\n\r\n\r\nexport const avatarUpload=(file)=>{\r\n    console.log(\"file\",file)\r\n      const data = new FormData()\r\n    data.append('Token', '7e4d1275ab9f4648839ecafb9c76f6d145679944:dG0wb_MqU3lCKuTzpYYr1igeWdg=:eyJkZWFkbGluZSI6MTU4NjY2NTE2NiwiYWN0aW9uIjoiZ2V0IiwidWlkIjoiNzE1OTI4IiwiYWlkIjoiMTY3OTY2MSIsImZyb20iOiJmaWxlIn0=')\r\n    data.append('file', file)\r\n   return  axios.post(\"http://up.imgapi.com/\",data)\r\n}"],"sourceRoot":""}