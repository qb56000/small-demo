(this["webpackJsonpreal-project"]=this["webpackJsonpreal-project"]||[]).push([[5],{118:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s}));var a=n(161),o=n(5),i=n(65),r=function(e){return function(t){t(u()),Object(i.f)(e).then((function(n){var o=n.data.data,i=o.authToken,r=Object(a.a)(o,["authToken"]);200===n.data.code?(!0===e.remember?(window.localStorage.setItem("authToken",JSON.stringify(i)),window.localStorage.setItem("info",JSON.stringify(r))):(window.sessionStorage.setItem("authToken",JSON.stringify(i)),window.sessionStorage.setItem("info",JSON.stringify(r))),t(l(n.data.data))):t(c())}))}},c=function(){return window.localStorage.removeItem("authToken"),window.localStorage.removeItem("info"),window.sessionStorage.removeItem("authToken"),window.sessionStorage.removeItem("info"),{type:o.a.LOG_FAIL}},l=function(e){return console.log("success",e),{type:o.a.LOG_SUCCESS,payload:{info:e}}},u=function(){return{type:o.a.START_lOG}},s=function(e){return function(t){t({type:o.a.AVATAR_UPLOAD,payload:{avatar:e}})}}},122:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var a=n(5),o=n(65),i=function(e){return function(t){t(l()),setTimeout((function(){t({type:a.a.MARK_NOTIFICATION_AS_READ_BY_ID,payload:{id:e}}),t(u())}),2e3)}},r=function(){return function(e){e(l()),setTimeout((function(){e({type:a.a.MARK_ALL_NOTIFICATIONS_AS_READ}),e(u())}),2e3)}},c=function(){return function(e){e(l()),Object(o.e)().then((function(t){e({type:a.a.RECEIVE_NOTIFICATION,payload:{list:t}}),e(u())}))}},l=function(){return{type:a.a.Begin_MARK}},u=function(){return{type:a.a.END_MARK}}},152:function(e,t,n){e.exports=n.p+"static/media/MiLogo.0e90bd81.png"},168:function(e,t,n){e.exports=n(274)},187:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){"use strict";n.r(t);var a,o,i=n(0),r=n.n(i),c=n(3),l=n(37),u=n(38),s=n(40),d=n(39),p=n(41),m=n(27),f=n(51),g=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Loading")}}]),t}(i.Component),h=(n(166),n(119)),O=(n(179),n(159)),A=(n(181),n(36)),I=(n(167),n(105)),b=(n(185),n(29)),E=n(278),_=n(152),y=n.n(_),N=(n(187),n(21)),T=n.n(N),v=T()({loader:function(){return Promise.all([n.e(0),n.e(7),n.e(15)]).then(n.bind(null,1008))},loading:g}),S=T()({loader:function(){return n.e(17).then(n.bind(null,1009))},loading:g}),L=T()({loader:function(){return Promise.all([n.e(0),n.e(9),n.e(19)]).then(n.bind(null,1010))},loading:g}),R=T()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(12)]).then(n.bind(null,1011))},loading:g}),j=T()({loader:function(){return Promise.all([n.e(0),n.e(2),n.e(4),n.e(3),n.e(10)]).then(n.bind(null,1015))},loading:g}),k=T()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(11),n.e(14)]).then(n.bind(null,1012))},loading:g}),w=T()({loader:function(){return Promise.all([n.e(0),n.e(2),n.e(13),n.e(18)]).then(n.bind(null,1013))},loading:g}),C=T()({loader:function(){return n.e(16).then(n.bind(null,1014))},loading:g}),D=n(275),M=n(276),F=n(277),K=[{pathname:"/login",component:R},{pathname:"/404",component:S},{pathname:"/login",component:R}],G=[{pathname:"/admin/dashboard",component:v,title:"Dashboard",isNav:!0,icon:D.a,roles:["001","002"]},{pathname:"/admin/article",component:j,title:"Article",exact:!0,isNav:!0,icon:M.a,roles:["001","002"]},{pathname:"/admin/article/edit/:id",component:k,title:"ArticleEdit",isNav:!1,roles:["001"]},{pathname:"/admin/settings",title:"Settings",component:L,isNav:!0,icon:F.a,roles:["001"]},{pathname:"/admin/notifications",title:"Notification",component:w,isNav:!1,roles:["001","002"]},{pathname:"/admin/authentication",component:C,title:"Authentication",isNav:!1,roles:["001","002"]}],U=n(122),x=n(118),Y=b.a.Header,J=b.a.Content,P=(b.a.Footer,b.a.Sider),B=Object(f.b)((function(e){return console.log(e.user),{number:e.notifications.list.filter((function(e){return!e.hasRead})).length,displayName:e.user.displayName,avatar:e.user.avatar}}),{getNotification:U.a,logFailed:x.c})(a=Object(m.g)(a=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).select=function(e){var t=e.key;n.props.history.push(t)},n.dropDownMenuClick=function(e){var t=e.key;"/logout"===t?n.props.logFailed():n.props.history.push(t)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getNotification()}},{key:"render",value:function(){var e=r.a.createElement(A.a,{onClick:this.dropDownMenuClick},r.a.createElement(A.a.Item,{key:"/admin/notifications"},r.a.createElement(I.a,{dot:Boolean(this.props.number)},"\u901a\u77e5\u4e2d\u5fc3")),r.a.createElement(A.a.Item,{key:"/admin/settings"},"\u4e2a\u4eba\u8bbe\u7f6e"),r.a.createElement(A.a.Item,{key:"/logout"},"\u9000\u51fa")),t=G.filter((function(e){return!0===e.isNav}));return r.a.createElement(b.a,{style:{minHeight:"100%"}},r.a.createElement(Y,{className:"header cus-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:y.a}),r.a.createElement("span",null,"this is test")),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(h.a,{overlay:e,trigger:["click"]},r.a.createElement(I.a,{count:this.props.number,offset:[3,-3]},r.a.createElement("a",{onClick:function(e){return e.preventDefault()}},r.a.createElement(O.a,{size:30,src:this.props.avatar,style:{marginRight:"5px"}}),this.props.displayName," ",r.a.createElement(E.a,null)))))),r.a.createElement(b.a,null,r.a.createElement(P,{width:200,className:"site-layout-background"},r.a.createElement(A.a,{mode:"inline",selectedKeys:this.props.location.pathname,style:{height:"100%",borderRight:0},onClick:this.select},t.map((function(e){return r.a.createElement(A.a.Item,{key:e.pathname},r.a.createElement(e.icon,null),e.title)})))),r.a.createElement(b.a,{style:{padding:"16px"}},r.a.createElement(J,{className:"site-layout-background",style:{padding:10,margin:0,minHeight:280}},this.props.children))))}}]),t}(i.Component))||a)||a,V=Object(f.b)((function(e){return{isLogin:e.user.isLogin,role:e.user.role}}))(o=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props.isLogin),this.props.isLogin?r.a.createElement(B,null,r.a.createElement(m.d,null,G.map((function(t){return r.a.createElement(m.b,{key:t.pathname,path:t.pathname,render:function(n){return console.log("ele",t),console.log("ele2",e.props.role),t.roles.includes(e.props.role)?r.a.createElement(t.component,n):r.a.createElement(m.a,{to:"/admin/authentication"})},exact:t.exact})})),r.a.createElement(m.a,{to:G[0].pathname,from:"/admin",exact:!0}),r.a.createElement(m.a,{to:"/404"}))):r.a.createElement(m.a,{to:"/login"})}}]),t}(i.Component))||o,W=(n(273),n(71)),Z=n(34),q=n(160),z=n(10),H=n(5),Q={isLoading:!1,list:[]},X=window.localStorage.getItem("authToken")||window.sessionStorage.getItem("authToken"),$=JSON.parse(window.localStorage.getItem("info"))||JSON.parse(window.sessionStorage.getItem("info")),ee=Object(z.a)({},$,{isLogin:X,isLoading:!1}),te=Object(Z.c)({notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.a.RECEIVE_NOTIFICATION:return Object(z.a)({},e,{list:t.payload.list});case H.a.Begin_MARK:return Object(z.a)({},e,{isLoading:!0});case H.a.END_MARK:return Object(z.a)({},e,{isLoading:!1});case H.a.MARK_NOTIFICATION_AS_READ_BY_ID:var n=e.list.map((function(e){return e.id===t.payload.id&&(e.hasRead=!0),e}));return Object(z.a)({},e,{list:n});case H.a.MARK_ALL_NOTIFICATIONS_AS_READ:return Object(z.a)({},e,{list:e.list.map((function(e){return e.hasRead=!0,e}))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(console.log("state",e),t.type){case H.a.START_lOG:return Object(z.a)({},e,{isLoading:!0});case H.a.LOG_SUCCESS:return console.log("ele0",e),Object(z.a)({},e,{isLoading:!1,isLogin:!0});case H.a.LOG_FAIL:return console.log("fail"),{id:"",avatar:"",role:"",displayName:"",authToken:"",isloading:!1,isLogin:!1};case H.a.AVATAR_UPLOAD:return Object(z.a)({},e,{avatar:t.payload.avatar});default:return ee}}}),ne=Object(Z.d)(te,Object(Z.a)(q.a));Object(c.render)(r.a.createElement(f.a,{store:ne},r.a.createElement(W.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/admin",render:function(e){return r.a.createElement(V,e)}}),K.map((function(e){return r.a.createElement(m.b,{key:e.pathname,path:e.pathname,component:e.component})})),r.a.createElement(m.a,{to:"/admin",from:"/",exact:!0}),r.a.createElement(m.a,{to:"/404"})))),document.querySelector("#root"))},5:function(e,t,n){"use strict";t.a={MARK_NOTIFICATION_AS_READ_BY_ID:"MARK_NOTIFICATION_AS_READ_BY_ID",MARK_ALL_NOTIFICATIONS_AS_READ:"MARK_ALL_NOTIFICATIONS_AS_READ",Begin_MARK:"Begin_MARK",END_MARK:"END_MARK",RECEIVE_NOTIFICATION:"RECEIVE_NOTIFICATION",START_lOG:"START_lOG",LOG_SUCCESS:"LOG_SUCCESS",LOG_FAIL:"LOG_FAIL",LOG_OUT:"LOG_OUT",AVATAR_UPLOAD:"AVATAR_UPLOAD"}},65:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return h}));n(164);var a=n(120),o=n(10),i=n(81),r=n.n(i),c=(n(207),r.a.create({baseURL:""})),l=r.a.create({baseURL:""});c.interceptors.request.use((function(e){return e.data=Object(o.a)({},e,{authToken:"aaa"}),e})),c.interceptors.response.use((function(e){if(200===e.data.code)return e.data.data;a.a.error(e.data.errMsg)}));var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return c.post("/api/v1/articleList",{offset:e,limited:t})},s=function(e){return c.post("/api/v1/delete/".concat(e))},d=function(e){return c.get("/api/v1/article/".concat(e))},p=function(e,t){return console.log("data",t),c.post("/api/v1/articleEdit/".concat(e),t)},m=function(){return c.get("http://rap2.taobao.org:38080/app/mock/248902/api/v1/amount")},f=function(){return c.post("http://rap2.taobao.org:38080/app/mock/248902/example/1586326916396")},g=function(e){return l.post("http://rap2.taobao.org:38080/app/mock/248902/api/v1/login",e)},h=function(e){console.log("file",e);var t=new FormData;return t.append("Token","7e4d1275ab9f4648839ecafb9c76f6d145679944:dG0wb_MqU3lCKuTzpYYr1igeWdg=:eyJkZWFkbGluZSI6MTU4NjY2NTE2NiwiYWN0aW9uIjoiZ2V0IiwidWlkIjoiNzE1OTI4IiwiYWlkIjoiMTY3OTY2MSIsImZyb20iOiJmaWxlIn0="),t.append("file",e),r.a.post("http://up.imgapi.com/",t)}}},[[168,6,8]]]);
//# sourceMappingURL=main.5b46766a.chunk.js.map